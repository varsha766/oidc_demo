<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitter Login</title>
</head>

<body>

    <button id="twitter-login-button">Login with Twitter</button>

    <script>
            document.getElementById('twitter-login-button').addEventListener('click', function () {
                // Replace with your Twitter API key and callback URL
                var apiKey = 'NyjbZn2ssQR3bjy9IqR9KUbMj';
                var callbackUrl = 'http://localhost:3002/api/v1/login/callback';

                // Construct the Twitter authentication URL
                var twitterAuthUrl = `https://twitter.com/i/oauth2/authorize?response_type=code&client_id=VkJiZEgtTDhMWk0yU3BPUDFBSEk6MTpjaQ&redirect_uri=${callbackUrl}&scope=tweet.read%20users.read%20follows.read%20follows.write%20like.read&state=state&code_challenge=1234785&code_challenge_method=plain`
            // Open a new window for Twitter authentication
            var authWindow = window.open(twitterAuthUrl, '_blank', 'width=600,height=400');

            var checkWindow = setInterval(function () {
                try {
                    // Check if the URL contains the authorization token and verifier
                    if (authWindow.location.href.indexOf('oauth_token') !== -1 && authWindow.location.href.indexOf('oauth_verifier') !== -1) {
                        clearInterval(checkWindow);

                        // Extract the authorization token and verifier from the URL
                        var urlParams = new URLSearchParams(authWindow.location.search);
                        var oauthToken = urlParams.get('oauth_token');
                        var oauthVerifier = urlParams.get('oauth_verifier');

                        // Close the authorization window
                        authWindow.close();

                        // Handle the obtained OAuth token and verifier (you can send them to your backend for access token retrieval)
                        console.log('OAuth Token:', oauthToken);
                        console.log('OAuth Verifier:', oauthVerifier);
                    }
                } catch (error) {
                    // Ignore errors due to cross-origin restrictions
                }
            }, 1000);
        });
    </script>

</body>
</html>
